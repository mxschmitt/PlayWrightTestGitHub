on: 
  workflow_dispatch:

jobs:
   
  test:
    runs-on: windows-latest

    steps:
    
    - uses: actions/checkout@v3

    - name: Add MSBUILD to PATH
      uses: microsoft/setup-msbuild@v1.0.2
      
    - name: Restore NuGet Packages
      shell: pwsh
      run: msbuild -t:restore -p:RestorePackagesConfig=true .\src\Playwright.sln

    - name: Build Site
      run: msbuild .\src\Playwright.sln /p:Configuration=release
      
    - name: Setup VSTest Path
      uses: darenm/Setup-VSTest@v1.2

    - name: Run Unit Tests
      id: tests
      run: vstest.console.exe .\src\XUnitTestProject\bin\Release\XUnitTestProject.dll
